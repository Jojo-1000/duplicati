<h1 translate>Restore options</h1>

<h2 translate>Where do you want to restore the files to?</h2>
<div class="input checkbox multiple leftflush">
  <input id="restoretooriginalpath" type="radio" name="restorelocation" [(ngModel)]="data.restoreLocation" value="direct" />
  <label for="restoretooriginalpath" translate>Original location</label>
</div>
<div class="input checkbox multiple leftflush">
  <input id="restoretonewpath" type="radio" name="restorelocation" [(ngModel)]="data.restoreLocation" value="custom" />
  <label for="restoretonewpath" translate>Pick location</label>
</div>

<div *ngIf="hideFolderBrowser" class="input text overlayButton multiple" style="max-width: none">
  <label for="restore_path" translate>Folder path</label>
  <input type="text" name="restore_path" id="restore_path" [(ngModel)]="restorePath" placeholder="Enter the destination path" />
  <a routerLink="." id="file_targetFolderPathAdd" class="button" (click)="hideFolderBrowser = false" translate>Browse</a>
</div>

<div class="input text" [hidden]="hideFolderBrowser">

  <div class="input" style="padding-bottom: 0px">
    <a routerLink="." (click)="showHiddenFolders = !showHiddenFolders" style="float: right; margin-right: 10px;">
      <span *ngIf="showHiddenFolders" translate>Hide hidden folders</span>
      <span *ngIf="!showHiddenFolders" translate>Show hidden folders</span>
    </a>

    <a routerLink="." (click)="hideFolderBrowser = true" style="float: right; margin-right: 10px;" translate>Manually type path</a>
  </div>

  <label for="folder_path_picker" translate>Folder path</label>
  <div style="clear: both;">
    <app-destination-folder-picker class="filepicker resizable" id="folder_path_picker" [(path)]="restorePath" [showHidden]="showHiddenFolders" [hideUserNode]="false"></app-destination-folder-picker>
  </div>
</div>

<h2 translate>How do you want to handle existing files?</h2>
<div class="input checkbox multiple leftflush">
  <input type="radio" id="restoreoverwrite" name="restoreoverwrite" [(ngModel)]="data.restoreMode" value="overwrite" />
  <label for="restoreoverwrite" translate>Overwrite</label>
</div>
<div class="input checkbox multiple leftflush">
  <input type="radio" id="restorenewcopy" name="restoreoverwrite" [(ngModel)]="data.restoreMode" value="copy" />
  <label for="restorenewcopy" translate>Save different versions with timestamp in file name</label>
</div>



<h2 translate>Permissions</h2>
<div class="input checkbox leftflush">
  <input type="checkbox" id="readwritepermissions" [(ngModel)]="data.restorePermissions" />
  <label for="readwritepermissions" translate>Restore read/write permissions</label>
</div>

<div class="input password" *ngIf="showInputPassphrase">
  <h2 translate>Passphrase</h2>
  <p translate>
    Backup is encrypted but no passphrase is available.
    Type a passphrase below to use for restoring your files,
    or, in case of GPG encryption, leave blank to let gpg retrieve the passphrase by
    invoking your system's keychain.
  </p>
  <input type="password" name="passphrase" id="passphrase" [(ngModel)]="data.passphrase"
         placeholder="Type passphrase here." />
</div>

<div class="buttons">
  <a routerLink="." class="submit" (click)="restore.emit(data)" translate>Restore</a>
  <a routerLink="." class="submit" (click)="prev.emit()" translate>Back</a>
</div>
